
# 相談の仕方
- 私の提案・相談について、すべて肯定する必要はありません. むしろ、批判的に聞いてください
- 提案・相談内容に懸念や問題点があれば、指摘の上で代替案を出してください
- 提案・相談内容については、セキュリティ・パフォーマンス・ユーザー体験・アクセサビリティ・トレーサビリティの観点を重視して回答してください

## 機能追加
- 新しい機能の追加を相談された時は、まず要件定義とドメインモデリングから始めてください
- 明示的に指示されるまで、コードの具体的な実装は不要です
- 定義された要件は、 docs/domain 以下に {要件名}.md 形式のmarkdownファイルで記述してください
- 定義されたドメインモデルは、 docs/domain/domain-model.md 形式のmarkdownファイルで記述してください。ドメインモデルはmarkdownファイル内にmermaid記法で記述してください
    - mermaid記法はmermaid.jsの公式サイトを参照してください
- 要件定義までに検討した事項、結論、議論の途中で却下された選択肢、採択の理由を、 docs/adr 以下に {年月日}-{タイトル}.md 形式のmarkdownファイルで記述してください

## 機能変更
- 機能の変更を相談された時は、まず要件の修正とドメインモデルの更新から始めてください
- 明示的に指示されるまで、コードの具体的な実装は不要です
- 要件が更新された場合、docs/domain以下のファイルに反映してください
- ドメインモデルが更新された場合、docs/domain/domain-model.mdに反映してください
- 要件定義までに検討した事項、結論、議論の途中で却下された選択肢、採択の理由を、 docs/adr 以下に {年月日}-{タイトル}.md 形式のmarkdownファイルで記述してください

## 設計
- 可読性・交換容易性・一覧性を重視してください
- 結合度が低く、凝集度が高いモジュールを作るようにしてください

# 開発
## React
- 最新のドキュメントを参照してください

## ReactRouter v7~
- 最新のドキュメントを参照してください

## TypeScript
- 最新のTypeScriptドキュメントを参照してください
- 作成するコードは、TypeScriptの使用を前提としてください
- Reactを使用するファイルでも、TypeScriptの併用を前提としてください

## wrangler
- 最新のwranglerドキュメントを参照してください

## テスト
- テストコードはTypeScriptで作成してください
- property based testing の採用を常に考慮してください
- property based testging でサポートできないケースについて、 sample based testing を採用してください

## ライブラリ全般
- ライブラリを提案する際は、以下の条件を満たすライブラリを優先してください
  - 開発が活発
  - GitHubリポジトリのスター数が多い
  - npmでのダウンロード数が多い
  - TypeScriptに標準対応
  - 依存ライブラリが少ない

## リファクタリング
- リファクタリングによって、既存の振る舞いが変わらないようにしてください

## インフラ
- cloudflare pages + D1 を前提としてください
- ORMなどを選定する際も、この構成を前提にしてください

## renovate
- renovateの作ったブランチをベースにPR作成した場合は、以下に従ってください
    - PRの向き先はmainにしない
    - renovateの作ったブランチをベースに、renovateの作ったブランチへ向けたPRを作成する

## Pull Request
Pull Requestを作成する場合は、必ず以下の手順に従ってください
1. ベースブランチを最新に更新する
2. 更新されたベースブランチへrebaseする
3. コンフリクトがあれば、解決する

# その他
## 更新履歴の追加方法
サイトに更新履歴を追加する場合、以下に従ってください
- 更新履歴はエンドユーザー向けの情報ですので、実装の詳細は不要です
- Webサイトにどのような変化があったのか、エンドユーザーに見える範囲で端的に説明してください
- 利用規約に変更があった場合は、過去の更新履歴を参考に、差分がわかるように更新履歴を作成してください
