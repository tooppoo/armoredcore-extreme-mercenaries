
# 相談の仕方
- 私の提案・相談について、すべて肯定する必要はありません. むしろ、批判的に聞いてください
- 提案・相談内容に懸念や問題点があれば、指摘の上で代替案を出してください
- 提案・相談内容については、セキュリティ・パフォーマンス・ユーザー体験・アクセサビリティ・トレーサビリティの観点を重視して回答してください

# 開発の流れ
- まずアプリケーションに何が必要か、**要求**を確認してまとめた内容を docs/requests/{title}.md に配置。要求が十分か確認すること
- 要求から想定される代表的なシナリオを作成して、 docs/scenario/{title}.md に配置。シナリオが十分か確認すること
- シナリオが作成できたら、要求とシナリオの内容をもとに**要件**を定義し、成果を docs/requirements/{title}.md に配置すること
- 要件定義が済んだら、要求・シナリオ・要件に基づいてアプリケーションを構成するドメインモデルを作成すること
- ドメインモデルの定義ができたら、要求・シナリオ・要件・ドメインモデルに基づいてアクター・ユースケース・エンティティ・バウンダリ・コントロールを抽出してユースケース図を作成し、 docs/usecases/{title}.md に配置すること
- ユースケースを作成したら、要求・シナリオ・要件・仕様・ドメインモデル・ユースケースの内容を元に作成した仕様を docs/spec/{title}.md の形式で配置すること
- 設計・実装は 要求・シナリオ・要件・仕様・ドメインモデル・ユースケース・仕様が揃ってから開始すること
- 設計・実装・テストは要求・シナリオ・要件・仕様・ドメインモデル・ユースケース・仕様の内容に従うこと
- 要求・シナリオ・要件・仕様・ドメインモデル・ユースケース・仕様の内容に従うと設計・実装・テストが困難となる場合は、要求・要件・仕様・シナリオ・ユースケースについて修正・変更が可能か確認すること
- 各図はmermaidjsの記法で記述すること

# 設計
- **可読性 / 交換容易性 / 一覧性**を重視すること。
- **低結合・高凝集**のモジュール分割を目指すこと。
- オブジェクト指向プログラミング、関数型プログラミングを適宜使い分けること。どちらかのみを原理的に採用するのではなく、より適切なアプローチを適切な箇所で採用する
- 一般的に知られるベストプラクティスに従うこと
- 設計上の決定および決定までの経緯は `docs/adr/{title}.md` に配置すること。`docs/adr` 以下に配置するテキストは ADR(Architecture Decision Record) の一般的な形式に従うこと

# 開発
## React
- 最新のドキュメントを参照してください

## ReactRouter v7~
- 最新のドキュメントを参照してください

## TypeScript
- 最新のTypeScriptドキュメントを参照してください
- 作成するコードは、TypeScriptの使用を前提としてください
- Reactを使用するファイルでも、TypeScriptの併用を前提としてください

## wrangler
- 最新のwranglerドキュメントを参照してください

## テスト
- テストコードはTypeScriptで作成してください
- property based testing の採用を常に考慮してください
- property based testging でサポートできないケースについて、 sample based testing を採用してください

## ライブラリ全般
- ライブラリを提案する際は、以下の条件を満たすライブラリを優先してください
  - 開発が活発
  - GitHubリポジトリのスター数が多い
  - npmでのダウンロード数が多い
  - TypeScriptに標準対応
  - 依存ライブラリが少ない

## リファクタリング
- リファクタリングによって、既存の振る舞いが変わらないようにしてください

## インフラ
- cloudflare pages + D1 を前提としてください
- ORMなどを選定する際も、この構成を前提にしてください

## renovate
- renovateの作ったブランチをベースにPR作成した場合は、以下に従ってください
    - PRの向き先はmainにしない
    - renovateの作ったブランチをベースに、renovateの作ったブランチへ向けたPRを作成する

## Pull Request
Pull Requestを作成する場合は、必ず以下の手順に従ってください
1. ベースブランチを最新に更新する
2. 更新されたベースブランチへrebaseする
3. コンフリクトがあれば、解決する

# その他
## 更新履歴の追加方法
サイトに更新履歴を追加する場合、以下に従ってください
- 更新履歴はエンドユーザー向けの情報ですので、実装の詳細は不要です
- Webサイトにどのような変化があったのか、エンドユーザーに見える範囲で端的に説明してください
- 利用規約に変更があった場合は、過去の更新履歴を参考に、差分がわかるように更新履歴を作成してください
